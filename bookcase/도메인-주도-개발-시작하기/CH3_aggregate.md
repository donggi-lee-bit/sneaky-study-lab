# 애그리거트

## 3.4 ID를 이용한 애그리거트 참조

애그리거트 루트는 다른 애그리거트를 참조할 수 있음

- **애그리거트 직접 참조**
  - 1.애그리거트 간 의존성 증가
    - 애그리거트의 변경을 어렵게 함
  - 2.참조한 객체의 로딩 전략 결정이 복잡해짐
  - 3.확장의 어려움
    - 사용자와 트래픽 증가에 따른 시스템 확장시 하위 도메인 분리가 일반적
    - 분리된 하위 도메인 간 다양한 DBMS, 데이터 저장소 사용 가능성
    - 다른 종류의 데이터 저장소를 사용하면 JPA 같은 단일 기술 사용에 제한
- **ID를 이용한 참조**
  - 1.애그리거트 간 물리적 연결 제거 및 모델 복잡도 감소
    - 애그리거트 간 의존성 제거로 응집도 증가
  - 2.구현 복잡도 감소, 로딩 방식 고민 불필요
    - 응용 서비스에서 ID를 이용한 로딩
    - 지연 로딩과 유사한 효과
  - 3.애그리거트 간 수정을 근본적으로 방지
    - 외부 애그리거트를 직접 참조하지 않음
    - -> 참조 애그리거트의 상태 변경 불가능
  - 4.애그리거트별 다른 구현 기술 사용 가능
    - 주문은 RDBMS, 조회 성능이 중요한 상품은 NoSQL, ...