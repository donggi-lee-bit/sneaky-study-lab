# 함수 정의와 호출

## 3.3 메서드를 다른 클래스에 추가: 확장 함수와 확장 프로퍼티

- **확장 함수의 정의와 사용**
  - 기존 클래스에 새로운 메서드를 추가하는 방식으로, 함수 이름 앞에 확장할 클래스 이름을 명시
- **확장 함수의 특징**
  - 클래스 외부에서 선언되며, 수신 객체 타입과 수신 객체를 통해 인스턴스 멤버처럼 작동
  - 확장 함수 내에서 `this`를 사용하여 수신 객체 참조 가능, 필요에 따라 `this` 생략 가능
  - 클래스의 `private`, `protected` 멤버에 접근 불가
  - 확장 함수와 클래스 멤버 메서드는 구분하지 않음
    - 호출 시 구분이 필요 없음

### 3.3.1 임포트와 확장 함수

- **확장 함수의 사용 조건**
  - 확장 함수를 프로젝트 내 다른 소스 코드에서 사용하려면 해당 함수를 임포트해야 함
- **임포트 방법**
  - 클래스 임포트와 동일한 구문으로 개별 확장 함수 임포트 가능
  - 와일드카드(`*`)를 사용한 전체 임포트와 `as` 키워드를 통한 이름 변경 지원
- **이름 충돌 해결**
  - 다른 패키지의 동일 이름 확장 함수 사용 시, `as`로 이름 변경하여 충돌 방지
  - 확장 함수는 짧은 이름으로만 호출해야 하므로, 임포트 시 이름 변경이 유일한 해결책 제공

### 3.3.2 자바에서 확장 함수 호출

- **확장 함수 구현 메커니즘**
    - 내부적으로 확장 함수는 수신 객체를 첫 번째 인자로 받는 정적 메서드로 구현됨
    - 확장 함수 호출 시 추가적인 어댑터 객체 생성이나 실행 시점 부가 비용이 없음
- **자바에서의 확장 함수 사용** 
  - 자바 코드에서는 확장 함수를 해당 함수가 정의된 코틀린 파일의 클래스 이름을 통해 정적 메서드로 호출 
  - e. g. `StringUtilKt.lastChar("Java")` 방식으로 호출 가능

### 3.3.4 확장 함수는 오버라이드할 수 없다

- - **오버라이드한 확장 함수 호출**
  - 변수에 저장된 객체의 동적인 타입에 의해 호출 될 확장 함수가 결정되지 않음
  - 확장 함수를 호출할 때 수신 객체로 지정한 변수의 정적 타입에 의해 어떤 확장 함수가 호출될지 결정됨
- **멤버 함수와 확장 함수의 호출 우선 순위**
  - 어떤 클래스를 확장한 함수와 그 클래스의 멤버 함수의 이름과 시그니처가 같다면 멤버 함수가 호출됨
  - 확장 함수와 이름과 시그니처가 같은 멤버 함수를 클래스 내부에 추가하면 재컴파일한 순간부터 확장 함수가 아닌 새로 추가된 멤버 함수를 사용하게 됨

### 3.3.5 확장 프로퍼티

- **확장 프로퍼티의 정의**
  - 기존 클래스 객체에 대한 프로퍼티 형식의 구문으로 사용할 수 있는 API를 추가하는 방식
- **확장 프로퍼티와 일반 프로퍼티와의 차이**
  - 일반적인 프로퍼티와 같지만 수신 객체 클래스가 추가됨
  - 일반적인 프로퍼티와 달리 확장 프로퍼티는 뒷받침하는 필드가 없어 게터를 제공할 수 없음
    - 게터를 정의해줘야 함
  - 초기화 코드에서 값을 담을 장소가 없으므로 초기화 코드도 사용할 수 없음