=# 4. 유스케이스 구현하기

## 도메인 모델 구현하기

- Account 엔티티
  - 입금(deposit), 출금(withdraw) 기능
  - 계좌의 현재 스냅샷 제공
  - ActivityWindow VO(Value Object) 를 통해 지난 며칠 혹은 몇 주 범위에 해당하는 활동을 보유

## 유스케이스 둘러보기

- 유스케이스에서 일어나는 일
  1. 입력
  2. 비즈니스 규칙 검증
  3. 모델 상태를 조작
  4. 출력값 반환
- 유스케이스가 인커밍 어댑터로부터 입력을 받을 때 입력값에 대한 유효성 검증을 하지 않음  
  -> 입력값에 대한 유효성 검증은 별도의 레이어에서 수행
- 유스케이스는 비즈니스 규칙을 검증할 책임을 가짐

## 입력 유효성 검증

- 유스케이스는 하나 이상의 어댑터에서 호출
- 어댑터에서 유스케이스를 호출하기 전에 유효성 검증을 한다면?
  -> 어댑터마다 유효성 검증을 구현? 실수가 발생할 수 있음

</br>

**입력 모델에서 유효성 검증**
  
```kotlin
data class SendMoneyCommand(
  val sourceAccountId: AccountId,
  val targetAccountId: AccountId,
  ...
) {
  init {
    // 생성 시점에 유효성 검증
  }
}

```

- 