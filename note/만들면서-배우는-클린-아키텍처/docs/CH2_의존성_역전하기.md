# 의존성 역전하기

## 단일 책임 원칙

**단일 책임 원칙의 오해**
- 일반적으로 단일 책임 원칙을 '하나의 컴포넌트는 오로지 한 가지 일만 해야 하고, 그것을 올바르게 수행해야 한다' 라고 해석
- 하지만 이는 직관적으로 해석한 것으로, 실제 정의는 '컴포넌트를 변경하는 이유는 단 하나여야만 한다' 라고 함
- 단일 책임에서의 책임은 `한 가지 일`이 아닌 `변경할 이유`로 해석

<br></br>

**단일 책임 원칙 위반 사례**

<img src="images/img3.png" width="300px"/>

- 컴포넌트 A는 다른 여러 컴포넌트를 의존하는 반면 컴포넌트 E는 어느 컴포넌트도 의존하지 않음
- 컴포넌트 A의 경우 모든 컴포넌트를 의존하고 있어 다른 어떤 컴포넌트가 바뀌면 같이 바뀌어야함
- 이는 단일 책임 원칙을 위반하는게 변경 비용을 증가한다는 사례를 제시하고 있음
- 변경할 이유가 많이 쌓인 후 컴포넌트를 바꾸는 것이 다른 컴포넌트가 실패하는 원인으로 작용할 수 있음

<br></br>

## 의존성 역전 원칙

- 계층형 아키텍처에서 계층 간 의존성은 항상 다음 계층인 아래 방향을 가리킴
- 영속성 계층에 대한 도메인 계층의 의존성 때문에 영속성 계층이 변경되면 도메인 계층도 그 영향을 받게됨
- 이러한 의존성을 제거하는 방법으로 `의존성 역전 원칙`을 제시

<br></br> 

**의존성 역전 동작 예시**

<img src="images/img4.png" width="300px"/>

- 엔티티는 도메인 객체를 표현, 도메인 로직은 이 엔티티의 상태를 변경하는 일을 중심으로 하기 때문에 엔티티를 도메인 계층으로 올림


