# 응용 서비스와 표현 영역

## 6.2 응용 서비스의 역할

- 응용 서비스의 기본 역할
    - 사용자의 요청에 따라 기능을 실행하고, 리포지터리에서 도메인 객체를 사용하여 이를 처리함
    - 도메인 영역과 표현 영역 사이를 연결하는 중간자 역할을 수행함
- 응용 서비스의 작업 흐름
    - 리포지터리에서 애그리거트를 조회하고, 애그리거트의 도메인 기능을 실행하여 결과를 반환함
- 응용 서비스 설계 시 고려사항
    - 복잡성이 높아질 경우, 도메인 로직 일부를 구현하고 있을 가능성이 있으며, 이는 코드 중복과 로직 분산으로 이어질 수 있음
    - 트랜잭션 처리를 담당하며, 도메인 상태 변경 시 트랜잭션 범위 내에서 실행해야 함
    - 이 외에 접근 제어와 이벤트 처리의 역할이 있음

### 6.2.1 도메인 로직 넣지 않기

- 도메인 로직의 위치
    - 도메인 로직은 도메인 영역 내에 위치해야 하며, 응용 서비스는 이를 구현하지 않고 사용하기만 해야 함
- 응용 서비스에서의 도메인 로직 구현 문제
    - 코드 응집성이 떨어지고, 여러 응용 서비스에서 동일한 도메인 로직을 구현할 가능성이 높아짐으로써 코드 중복 발생
    - 도메인 로직을 응용 서비스에 구현하면 변경이 어려워지고, 이는 소프트웨어 가치를 떨어뜨리게 됨
- 올바른 접근 방법
    - 암호 변경과 같은 핵심 로직은 응용 서비스가 아닌 도메인 객체 내에 구현하여, 응용 서비스는 도메인 로직의 실행에만 집중해야 함
    - 이 접근은 코드 중복을 방지하고, 응집도를 높이며, 소프트웨어의 변경 용이성과 가치를 향상시킴

--- 

## 6.3 응용 서비스의 구현

- 응용 서비스의 역할 및 구현
  - 응용 서비스는 표현 영역과 도메인 영역 사이의 매개체 역할을 함, 파사드 패턴과 유사한 역할 수행
  - 복잡한 로직 없이 도메인 객체의 흐름을 제어하는 구조로 설계됨

### 6.3.1 응용 서비스의 크기

- 응용 서비스 구현 시 고려해야 할 사항 중 하나는 서비스의 크기
- 도메인의 모든 기능을 한 클래스에 구현 vs 기능별로 클래스 분리
  - 1.한 응용 서비스 클래스에 여러 기능 구현
    - 코드 중복 제거 용이
    - 클래스 크기 증가와 관련 없는 코드 뒤섞임의 단점
  - 2.기능별 응용 서비스 클래스 구분 
    - 코드 품질 유지에 도움 
    - 클래스 개수 증가와 중복 코드 발생 가능성 존재
  - 공통 로직은 별도의 보조 클래스로 분리하여 중복을 방지

### 6.3.2 응용 서비스의 인터페이스와 클래스

- 인터페이스 필요성: 구현 클래스가 다수 존재하거나 런타임에 교체 필요 시 유용
- 대부분의 응용 서비스에서는 구현 클래스 교체가 드물고, 한 가지 구현만 존재하는 경우가 일반적 
- 인터페이스와 구현 클래스 분리는 복잡성 증가로 이어질 수 있음